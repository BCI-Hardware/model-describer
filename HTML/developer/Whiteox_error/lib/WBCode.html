!function(e){function r(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=e.data.name;M.indexOf(t)>=0?(M.splice(M.indexOf(t),1),d3.select(this).attr("fill",C.heat[t])):(M.push(t),d3.select(this).attr("fill","#A7A8AA")),W.selectAll("*").remove();for(var i=0;i<T.AppData.length;i++)B(i)}function a(){L=document.getElementById("percentileCheck").checked,d3.select(".Chartcontainer").selectAll("*").remove(),w=P.getWidth(),l(T.AppData[0].Data[0].groupByVarName)}function g(){var e=y(),r=R.append("div").attr("class","dropdown");r.append("button").attr("class","dropbtn").html("<b>Group By:</b> "+z).append("span").style("float","right").html(" ▼");var t=r.append("div").attr("class","dropdown-content");t.selectAll("a").data(e).enter().append("a").html(function(e){return e}).attr("onclick",function(e){return"intializeTreeMap('"+e+"')"});R.append("div").attr("class","perc-check").html("<input id='percentileCheck' class='perc-checkinput' checked='true' onchange='togglePercentile()' type='checkbox'><label for='percentileCheck'>Percentiles</label>")}function p(e,r){setTimeout(function(){b=!0},300);var t=G.statData.filter(function(r){return r.groupByVarName==z&&r.groupByValue==e.data.name})[0],i=G.proportion.filter(function(r){return r.name==e.data.name})[0];q.style("opacity",1).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px").style("color",C.heat[e]).html("Group <b>"+t.groupByValue+" </b> is "+i.perc+"% of the data and has an average error of <b>"+P.formatLabel(t.MSE)+"</b>")}function h(e,r){setTimeout(function(){b=!0},300);var t=G.statData.filter(function(r){return r.groupByVarName==z&&r.groupByValue==e.data.name})[0],i=G.proportion.filter(function(r){return r.name==e.data.name})[0];q.style("opacity",1).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px").style("color",C.heat[e.data.name]).html("Group <b>"+t.groupByValue+" </b> is "+P.formatLabel(i.perc)+"% of the data and has an average error of <b>"+P.formatLabel(t.MSE)+"</b>")}function u(e,r){q.style("opacity",0)}function l(e){function r(e){return e.children?0:1}function t(e){return e.size}C.heat={},z=e,m(),d3.select(".dropbtn").html("<b>Group By:</b> "+z).append("span").style("float","right").html(" ▼");var i=d(z),a={top:50,right:15,bottom:30,left:60};k.selectAll("*").remove();var g=.8*P.getWidth()-.1*a.left-a.right-.1*P.getWidth(),l=200-a.top-a.bottom;k.attr("width",g),k.attr("height",l);var y=function(e){return d3.interpolateRgb(e,"#fff")(.2)},c=(d3.scaleOrdinal(d3.schemeCategory20.map(y)),d3.format(",d"),d3.treemap().tile(d3.treemapResquarify).size([g,l-20]).round(!0).paddingInner(2)),N=d3.hierarchy(i).eachBefore(function(e){e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name}).sum(t).sort(function(e,r){return r.data.name-e.data.name});c(N),G.proportion=N.data.children;var s=0;for(var n in G.proportion)s+=G.proportion[n].size;for(var n in G.proportion)G.proportion[n].perc=100*G.proportion[n].size/s;var V=k.append("g").attr("class","cell-group").attr("transform","translate(0,20)"),S=V.selectAll("g").data(N.leaves()).enter().append("g").attr("transform",function(e){return"translate("+e.x0+","+e.y0+")"});S.append("rect").attr("id",function(e){return e.data.id+" brdr"}).attr("x",-2).attr("y",-2).attr("class","borderpath").attr("width",function(e){return e.x1-e.x0+4}).attr("height",function(e){return e.y1-e.y0+4}).attr("fill",function(e){return"#53565A"}).style("cursor","pointer"),S.append("rect").attr("id",function(e){return e.data.id}).attr("class","rect").attr("width",function(e){return e.x1-e.x0}).attr("height",function(e){return e.y1-e.y0}).attr("fill",function(e){return C.heat[e.data.name]}).on("click",o).on("mouseenter",p).on("mouseout",u).on("mousemove",h).style("cursor","pointer"),S.append("text").attr("clip-path",function(e){return"url(#clip-"+e.data.id+")"}).attr("dx",10).attr("dy",20).text(function(e){if(e.x1-e.x0>100){var r=G.statData.filter(function(r){return r.groupByVarName==z&&r.groupByValue==e.data.name})[0],t=G.proportion.filter(function(r){return r.name==e.data.name})[0];return"Category: "+r.groupByValue+" ("+P.formatLabel(t.perc)+"%)"}return""}).style("fill","#fff"),S.append("text").attr("clip-path",function(e){return"url(#clip-"+e.data.id+")"}).attr("dx",10).attr("dy",40).text(function(e){if(e.x1-e.x0>100){var r=G.statData.filter(function(r){return r.groupByVarName==z&&r.groupByValue==e.data.name})[0];return"Average Error: "+P.formatLabel(r.MSE)}return""}).style("fill","#fff"),d3.selectAll("input").data([t,r],function(e){return e?e.name:this.value}),W.selectAll("*").remove();for(var Y=0;Y<T.AppData.length;Y++)B(Y)}function d(e){var r={name:"heatMap",children:[]},t=T.AppData[0].Data,i=t.filter(function(r){return r.groupByVarName==e}),o=G.statData.filter(function(r){return r.groupByVarName==e}),a=d3.nest().key(function(e){return e.groupByValue}).rollup(function(e){return e.length}).entries(i);return a.forEach(function(e){var t={};t.name=e.key,t.size=o.filter(function(r){return r.groupByValue==e.key})[0].Total,r.children.push(t)}),r.children=r.children.sort(P.sortDictionary),r}function y(){var e=[];return T.AppData.forEach(function(r){r.Data.forEach(function(r){e.indexOf(r.groupByVarName)<0&&e.push(r.groupByVarName)})}),e}function c(e,r,t,i){var o=e.filter(function(e){return e.groupByValue==t});if(100==r){var a=o[o.length-1][i];return P.formatLabel(a)}var g=r/100*(o.length+1),p=parseInt(g);if(p)var a=o[p-1][i];else var a=o[p][i];return P.formatLabel(a)}function N(e,r,t){var i=d3.extent(e.map(function(e){return e[r]})),o={},a={};a.overEst="",a.underEst="",o.quartiles=[];for(var g=(d3.quantile(i,.25)-d3.min(i),1);g<=4;g++)for(var p in t){var h=t[p],u={};u.quarter=g,u.group=h;var l=c(e,25*(g-1),h,r),d=c(e,25*g,h,r);u.range=[l,d];var y=e.filter(function(e){return e[r]>=l&&e[r]<=d&&e.groupByValue==h});u.averageImpact=d3.mean(y.map(function(e){return e.predictedYSmooth})),u.medianImpact=d3.median(y.map(function(e){return e.predictedYSmooth})),u.estimate=Math.abs(d3.mean(y.map(function(e){return e.predictedYSmooth}))/d3.mean(y.map(function(e){return e.predictedYSmooth}))),u.estimate>=1?a.overEst+=P.formatLabel(l)+"-"+P.formatLabel(d)+", ":a.underEst+=P.formatLabel(l)+"-"+P.formatLabel(d)+", ",o.quartiles.push(u)}return a.lowest=d3.min(o.quartiles.map(function(e){return e.averageImpact})),a.highest=d3.max(o.quartiles.map(function(e){return e.averageImpact})),a.lowestGroup=o.quartiles.filter(function(e){return e.averageImpact==a.lowest})[0].group,a.lowestGroup=a.lowestGroup.indexOf("Bin")>=0?"for group "+a.lowestGroup.split("_")[1]:" for "+a.lowestGroup,a.highestGroup=o.quartiles.filter(function(e){return e.averageImpact==a.highest})[0].group,a.highestGroup=a.highestGroup.indexOf("Bin")>=0?"for group "+a.highestGroup.split("_")[1]:" for "+a.highestGroup,a.lowestQuartile=o.quartiles.filter(function(e){return e.averageImpact==a.lowest})[0].range,a.highestQuartile=o.quartiles.filter(function(e){return e.averageImpact==a.highest})[0].range,a.lowestRange=a.lowestQuartile,a.highestRange=a.highestQuartile,a.overAllAverageImpact=d3.mean(e.map(function(e){return e.predictedYSmooth})),a.overAllMedianImpact=d3.median(e.map(function(e){return e.predictedYSmooth})),a.diffMaxOverall=a.highest-a.overAllMedianImpact,a.diffMaxMin=a.highest-a.lowest,a}function s(e,r,t,i){var o=d3.extent(e.map(function(e){return e[r]})),a={},g={};g.overEst="",g.underEst="",a.quartiles=[];var p=d3.quantile(o,.25)-d3.min(o);for(var h in i)for(var u in t){var l=t[u],d=i[h],y={};y.quarter=d,y.group=l;var c=(d3.min(o)+(h-1)*p,d3.min(o)+h*p,e.filter(function(e){return e[r]==d&&e.groupByValue==l}));y.averageError=d3.mean(c.map(function(e){return e.errPos+e.errNeg})),y.MedianError=d3.median(c.map(function(e){return e.errPos+e.errNeg})),y.estimate=Math.abs(d3.mean(c.map(function(e){return e.errPos}))/d3.mean(c.map(function(e){return e.errNeg}))),y.estimate>=1?g.overEst+=d+" for "+l+", ":g.underEst+=d+" for "+l+", ",a.quartiles.push(y)}return g.lowest=d3.min(a.quartiles.map(function(e){return e.averageError})),g.highest=d3.max(a.quartiles.map(function(e){return e.averageError})),g.lowestGroup=a.quartiles.filter(function(e){return e.averageError==g.lowest})[0].group,g.lowestGroup=g.lowestGroup.indexOf("Bin")>=0?"for group "+g.lowestGroup.split("_")[1]:" for "+g.lowestGroup,g.highestGroup=a.quartiles.filter(function(e){return e.averageError==g.highest})[0].group,g.highestGroup=g.highestGroup.indexOf("Bin")>=0?"for group "+g.highestGroup.split("_")[1]:" for "+g.highestGroup,g.lowestQuartile=a.quartiles.filter(function(e){return e.averageError==g.lowest})[0].quarter,g.highestQuartile=a.quartiles.filter(function(e){return e.averageError==g.highest})[0].quarter,g.overAllAverageError=d3.mean(e.map(function(e){return e.errPos+e.errNeg})),g.overAllMedianError=d3.median(e.map(function(e){return e.errPos+e.errNeg})),g.diffMaxOverall=g.highest-g.overAllMedianError,g.diffMaxMin=g.highest-g.lowest,g}function m(){for(var e=[],r=0;r<T.AppData.length;r++){var t=T.AppData[r].Data.filter(function(e){return e.groupByVarName==z});if(t.length>0){var i=t[0],o=Object.keys(i).filter(function(e){return E.indexOf(e)<0})[0];C[o]={},C.heat={},t.forEach(function(r){e.indexOf(r.groupByValue)<0&&e.push(r.groupByValue)}),e.sort(P.sortAlphaNum),e.forEach(function(e,r){C[o][e]=x[r]})}}e.forEach(function(e,r){C.heat[e]=x[r]})}function n(){T.AppData.filter(function(e,r){"Accuracy"==e.Type&&(G.statData=e.Data,T.AppData.splice(r,1))})}function B(e){function r(){function r(o){function g(e,r){var t=d3.select("#"+a.replace(/[^a-zA-Z]/g,""));t.selectAll(".errorline").style("opacity",.25),t.selectAll("."+e).style("opacity",1)}function l(e,r){var t=d3.select("#"+a.replace(/[^a-zA-Z]/g,""));t.selectAll(".errorline").style("opacity",1),t.selectAll(".posError").style("opacity",.4),t.selectAll(".negError").style("opacity",.4),t.selectAll(".circleH").style("opacity",.4)}function d(r,o){var g=d3.select("#"+a.replace(/[^a-zA-Z]/g,"")),h=d3.select(this).attr("class").split(" ")[2],u=t();Q.transition().style("opacity",1).attr("x1",T(u)).attr("x2",T(u)).attr("transform","translate(10,0)"),setTimeout(function(){b=!0},300);var l=i.filter(function(e){return e[a]==u&&e.groupByValue==h})[0];q.attr("class","colorClass"+e+o),q.transition().duration(200).delay(100).style("opacity",1),q.html("At <span>"+P.formatLabel(l[a])+", "+a+" </span>has a Predicted-Quality of <span>"+P.formatLabel(l.predictedYSmooth)+" </span> with a positive error of <span>"+("null"!=l.errPos?P.formatLabel(l.errPos):0)+"</span> and a negative error of <span> "+("null"!=l.errNeg?P.formatLabel(l.errNeg):0)+"</span>").style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return p>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY+20+"px"),q.style("color",C[a][l.groupByValue]),g.selectAll(".errorline").style("opacity",.1),g.selectAll("circle").style("opacity",.1),g.selectAll("."+h).style("opacity",1).attr("cursor","pointer"),g.selectAll(".circleH").filter("."+h).style("opacity",.4)}function s(e){var r=d3.select("#"+a.replace(/[^a-zA-Z]/g,""));d3.select(this).attr("class").split(" ")[1];r.selectAll("path").style("opacity",1),r.selectAll(".negError").style("opacity",.25),r.selectAll(".posError").style("opacity",.25),r.selectAll("circle").style("opacity",1),r.selectAll(".circleH").style("opacity",.4),q.transition().duration(200).delay(100).style("opacity",0),Q.transition().style("opacity",0)}function m(r,o){var g=d3.select("#"+a.replace(/[^a-zA-Z]/g,"")),h=d3.select(this).attr("class").split(" ")[2],u=t();Q.transition().style("opacity",1).attr("x1",T(u)).attr("x2",T(u)).attr("transform","translate(10,0)"),setTimeout(function(){b=!0},300);var l=i.filter(function(e){return e[a]==u&&e.groupByValue==h})[0];q.attr("class","colorClass"+e+o),q.transition().duration(200).delay(100).style("opacity",1),q.html("At <span>"+P.formatLabel(l[a])+", "+a+" </span>has a Predicted-Quality of <span>"+P.formatLabel(l.predictedYSmooth)+" </span> with a positive error of <span>"+("null"!=l.errPos?P.formatLabel(l.errPos):0)+"</span> and a negative error of <span> "+("null"!=l.errNeg?P.formatLabel(l.errNeg):0)+"</span>").style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return p>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY+20+"px"),q.style("color",C[a][l.groupByValue]),g.selectAll(".errorline").style("opacity",.1),g.selectAll("circle").style("opacity",.1),g.selectAll("."+h).style("opacity",1).attr("cursor","pointer"),g.selectAll(".circleH").filter("."+h).style("opacity",.4)}function S(e,t){V[a].indexOf(e)>=0?(V[a].splice(V[a].indexOf(e),1),r(!1),d3.select(this).style("opacity",.5).style("background-color","#A7A8AA")):(V[a].push(e),r(!1),d3.select(this).style("opacity",1).style("background-color",C[a][e]))}E.selectAll("*").remove(),M.selectAll("*").remove(),I.selectAll("*").remove(),X.selectAll("*").remove(),j.selectAll("*").remove();var A=N(i,a,V[a]);B.html("<ul style='list-style-type:disc' > <li>Across all categories, the model's error in predicting <b>"+D+" </b> is lowest from <b> ["+A.lowestRange+"] </b> "+A.lowestGroup+" and highest from <b> ["+A.highestRange+"] </b> "+A.highestGroup+"</li> <li> The error from <b> ["+A.highestRange+"] </b>"+A.highestGroup+" is  "+P.formatLabel(A.diffMaxOverall)+" higher than the overall median error and "+P.formatLabel(A.diffMaxMin)+" higher than the average error from <b> ["+A.lowestRange+"] </b> "+A.lowestGroup+"</li> <li> When the model makes prediction errors, there are times when those errors systematically lean in one direction </li><li>  The model tends to consistently make mistakes in the same direction when it miss-estimates "+a+" between "+A.overEst.slice(0,A.overEst.length-2)+" (overestimate) and "+A.underEst.slice(0,A.underEst.length-2)+" (underestimate) </li></ul>");var z=V[a],_=100,H=0,F=i.filter(function(e){return z.indexOf(e.groupByValue)>=0});T.domain(d3.extent(F,function(e){return e[a]})),F.forEach(function(e){var r=e.predictedYSmooth+("null"==e.errPos?0:Math.abs(e.errPos)),t=e.predictedYSmooth+("null"==e.errNeg?0:e.errNeg);_>t&&(_=t),H<r&&(H=r)});var J=[];for(var $ in O){var K=0,ee=0;for(var re in V[a]){var te=V[a][re],ie=c(i,O[$],te,a),oe=G.proportion.filter(function(e){return e.name==te})[0].perc/100;K+=ie*oe,ee+=oe}J.push({percentile:O[$],value:P.formatLabel(K/ee)})}if(F=F.sort(function(e,r){return e[a]-r[a]}),Y.domain([_,H]),k.transition().duration(1e3).call(U),L){var ae=W.selectAll("line").data(J);ae.exit().remove(),ae.enter().append("line").style("opacity",1).attr("x1",function(e){return T(e.value)}).attr("y1",30*n).attr("x2",function(e){return T(e.value)}).attr("y2",h+30*n+10).attr("stroke","#75787B").attr("stroke-width","2px"),ae.transition().attr("x1",function(e){return T(e.value)}).attr("y1",30*n).attr("x2",function(e){return T(e.value)}).attr("y2",h+30*n+10).attr("stroke","#75787B").attr("stroke-width","2px");var ge=x.selectAll("text").data(J);ge.exit().remove(),ge.enter().append("text").text(function(e){return e.percentile}).attr("transform",function(e){return"translate("+(T(e.value)-5)+",25)"}),ge.transition().text(function(e){return e.percentile}).attr("transform",function(e){return"translate("+(T(e.value)-5)+",25)"})}I.selectAll("path").data(z).enter().append("path").attr("fill","none").attr("class",function(e){return"errorline "+e}).attr("stroke",function(e){return C[a][e]}).attr("stroke-width","2px").datum(function(e){var r=[];return F.map(function(t){t.groupByValue==e&&r.push(t)}),r}).attr("d",f),E.selectAll("path").data(z).enter().append("path").attr("class",function(e){return"errorline posError "+e}).attr("fill","grey").style("opacity",.4).datum(function(e){var r=[];return F.map(function(t){t.groupByValue==e&&r.push(t)}),r}).attr("id","line"+a.replace(/[^a-zA-Z]/g,"")).attr("d",v),M.selectAll("path").data(z).enter().append("path").attr("fill","grey").attr("class",function(e){return"errorline negError "+e}).style("opacity",.4).datum(function(e){var r=[];return F.map(function(t){t.groupByValue==e&&r.push(t)}),r}).attr("id","line"+a.replace(/[^a-zA-Z]/g,"")).attr("d",R);d3.select("#"+a.replace(/[^a-zA-Z]/g,"")).selectAll(".errorline").on("mouseenter",m).on("mouseout",s).on("mousemove",d),w.transition().duration(1e3).call(Z),w.selectAll("line").attr("opacity",.25).style("stroke-dasharray","3, 3"),k.selectAll("line").attr("opacity",.25).style("stroke-dasharray","3, 3");y.selectAll("button").data(u.sort(P.sortAlphaNum)).enter().append("button").attr("class",function(e){return"legend-btn "+e}).style("background-color",function(e){return C[a][e]}).style("cursor","pointer").on("click",S).on("mouseover",g).on("mouseout",l).html(function(e){return e})}function t(){var e=T.invert(d3.event.pageX-.02*P.getWidth()),r=i.map(function(e){return e[a]}),t=o(e,r);return t}function o(e,r){for(var t=r[0],i=Math.abs(e-t),o=0;o<r.length;o++){var a=Math.abs(e-r[o]);a<i&&(i=a,t=r[o])}return t}A=P.createChart(m,p),P.setTitle(l,"Error Distribution Graph: "+a+" (Grouped by "+z+")"),A.selectAll("*").remove(),A.attr("width",p);var u=[];i.forEach(function(e){u.indexOf(e.groupByValue)<0&&(u.push(e.groupByValue),V[a].push(e.groupByValue))});var d=140,s=parseInt(p/d),n=Math.ceil(u.length/s),S=A.append("g").attr("transform","translate(100,"+(h+30*n+35)+")");S.append("line").attr("x1",0).attr("y1",0).attr("x2",20).attr("y2",0).attr("stroke","#75787B").attr("stroke-width","3px"),S.append("text").text("Percentile").attr("x",30).attr("y",5);A.attr("height",h+30*n);var T=d3.scaleLinear().range([g.left,p]),Y=d3.scaleLinear().range([h,0]),f=(d3.interpolateCool,d3.line().x(function(e){return T(e[a])}).y(function(e){return Y(e.predictedYSmooth)}).curve(d3.curveBasis)),v=d3.area().x(function(e){return T(e[a])}).y0(function(e){return Y(e.predictedYSmooth)}).y1(function(e){return Y(e.predictedYSmooth+("null"==e.errPos?0:e.errPos))}).curve(d3.curveBasis),R=d3.area().x(function(e){return T(e[a])}).y0(function(e){return Y(e.predictedYSmooth+("null"==e.errNeg?0:e.errNeg))}).y1(function(e){return Y(e.predictedYSmooth)}).curve(d3.curveBasis),W=A.append("g").attr("class","percRefLines").attr("transform","translate(10,0)"),x=A.append("g").attr("class","textRefLines").attr("transform","translate(10,0)"),w=A.append("g").attr("class","xAxis Axes").attr("transform","translate(10,"+(h+30*n+10)+")"),k=A.append("g").attr("class","yAxis Axes").attr("transform","translate(60,30)"),E=A.append("g").attr("class","posErrorG").attr("transform","translate(10,"+30*n+")"),M=A.append("g").attr("class","negErrorG").attr("transform","translate(10,"+30*n+")"),I=A.append("g").attr("class","lineG").attr("transform","translate(10,"+30*n+")"),X=A.append("g").attr("class","circleG").attr("transform","translate(10,"+30*n+")"),j=A.append("g").attr("class","circleHG").attr("transform","translate(10,"+30*n+")"),Q=(A.append("text").attr("class","label").attr("transform","translate("+p/2+","+(h+30*n+40)+")").style("text-anchor","middle").text(a),A.append("text").attr("class","label").attr("transform","translate(15,"+h/2+")rotate(-90)").style("text-anchor","end").text("Predicted-Quality"),A.append("line").style("opacity",0).attr("x1",0).attr("y1",30*n-10).attr("x2",0).attr("y2",h+30*n+10).attr("stroke","#75787B"));Y.domain([-1,1]);var U=d3.axisLeft().scale(Y).tickSizeInner(-p+g.left),Z=d3.axisBottom().scale(T).tickSizeInner(-h-10);k.call(U),w.call(Z),r(!1)}function t(){function e(e){var r=[];return e.forEach(function(e){r.indexOf(e[a])<0&&r.push(e[a])}),r}function r(){function e(e,r){q.transition().duration(200).delay(100).style("opacity",1),q.html("<span>"+a+"</span> has a Predicted-Quality of <span>"+P.formatLabel(e.predictedYSmooth)+"</span> for category <span>"+e.groupByValue+"</span> with errors in ranging, on average, from <span>"+P.formatLabel(e.errNeg)+"</span> to <span>"+P.formatLabel(e.errPos)+"</span>").style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return p>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY+15+"px"),q.style("color",C[a][e.groupByValue])}function g(e,r){q.transition().duration(200).delay(100).style("opacity",1),q.html("<span>"+a+"</span> has a Predicted-Quality of <span>"+P.formatLabel(e.predictedYSmooth)+"</span> for category <span>"+e.groupByValue+"</span> with errors in ranging, on average, from <span>"+P.formatLabel(e.errNeg)+"</span> to <span>"+P.formatLabel(e.errPos)+"</span>").style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return p>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY+15+"px"),q.style("color",C[a][e.groupByValue])}function u(e,r){var t=d3.select("#"+a.replace(/[^a-zA-Z]/g,""));t.selectAll("."+e).style("stroke","#000").style("stroke-width",2)}function l(e,r){var t=d3.select("#"+a.replace(/[^a-zA-Z]/g,""));t.selectAll("."+e).style("stroke-width",0)}function d(e,r){q.transition().style("opacity",0),b=!1,f.transition().style("opacity",0),d3.select(this).attr("stroke-width","0px")}function c(e,t){V[a].indexOf(e)>=0?(V[a].splice(V[a].indexOf(e),1),r(),d3.select(this).style("opacity",.5).style("background-color","#A7A8AA")):(V[a].push(e),r(),d3.select(this).style("opacity",1).style("background-color",C[a][e]))}Y.selectAll("*").remove(),R.selectAll("*").remove();var m=R.append("g").attr("class","posLineGroup").attr("transform","translate(0,70)"),W=R.append("g").attr("class","dashedLineGroup").attr("transform","translate(0,70)"),x=R.append("g").attr("class","circleGroup").attr("transform","translate(0,70)"),w=R.append("g").attr("class","negLineGroup").attr("transform","translate(0,70)"),k=V[a].sort(P.sortAlphaNum),E=1e3,L=0,z=i.filter(function(e){return k.indexOf(e.groupByValue)>=0});z.forEach(function(e){var r=Math.abs(e.predictedYSmooth)+Math.abs(e.errPos),t=Math.abs(e.predictedYSmooth)-Math.abs(e.errNeg);E=d3.min([E,r,t]),L=d3.max([L,r,t])});var M=[E>0?.9*E:1.1*E,L<0?.9*L:1.1*L];N.domain(t),n.domain(k).rangeRound([0,N.bandwidth()]),S.domain(M);var G=s(z,a,V[a],t);B.html("<ul style='list-style-type:disc' > <li>Across all categories, the model's error in predicting <b>"+D+" </b> is lowest for <b> "+G.lowestQuartile+" </b> "+G.lowestGroup+" and highest for <b> "+G.highestQuartile+" </b> "+G.highestGroup+"</li> <li> The error for <b>"+G.highestQuartile+" </b> "+G.highestGroup+" is  "+P.formatLabel(G.diffMaxOverall)+" higher than the overall median error and "+P.formatLabel(G.diffMaxMin)+" higher than the average error from <b>"+G.lowestQuartile+"</b> "+G.lowestGroup+"</li> <li> When the model makes prediction errors, there are times when those errors systematically lean in one direction </li><li>  The model tends to consistently make mistakes in the same direction when it miss-estimates "+a+" between "+G.overEst.slice(0,G.overEst.length-2)+" (overestimate) and "+G.underEst.slice(0,G.underEst.length-2)+" (underestimate) </li></ul>");var O=d3.axisBottom().scale(N);T.transition().duration(1e3).call(v),A.select(".xAxis").call(O).attr("transform","translate(0,"+(h+50)+")");W.selectAll("g").data(t).enter().append("g").selectAll("line").data(function(e){return z.filter(function(r){return r[a]==e})}).enter().append("line").attr("x1",function(e){return N(e[a])+n(e.groupByValue)+n.bandwidth()/2}).attr("y1",function(e){return S(e.predictedYSmooth+e.errNeg)}).attr("x2",function(e){return N(e[a])+n(e.groupByValue)+n.bandwidth()/2}).attr("y2",function(e){return S(e.predictedYSmooth+e.errPos)}).attr("stroke-width",2).style("stroke-dasharray","4, 4").attr("opacity",1).attr("stroke","#75787B"),x.selectAll("g").data(t).enter().append("g").attr("class",function(e){return"circleGroup "+e}).selectAll("circle").data(function(e){return z.filter(function(r){return r[a]==e})}).enter().append("circle").attr("class",function(e){return"circle "+e.groupByValue}).attr("r",5).attr("cx",function(e){return N(e[a])+n(e.groupByValue)+n.bandwidth()/2}).attr("cy",function(e){return S(e.predictedYSmooth)}).attr("fill",function(e){return C[a][e.groupByValue]}),m.selectAll("g").data(t).enter().append("g").selectAll("rect").data(function(e){return z.filter(function(r){return r[a]==e})}).enter().append("rect").attr("x",function(e){return N(e[a])+n(e.groupByValue)+n.bandwidth()/4}).attr("y",function(e){return S(e.predictedYSmooth+e.errPos)}).attr("width",function(e){return n.bandwidth()/2}).attr("height",function(e){return 1}).attr("stroke-width",3).attr("opacity",1).attr("fill","#75787B"),w.selectAll("g").data(t).enter().append("g").selectAll("rect").data(function(e){return z.filter(function(r){return r[a]==e&&V[a].indexOf(r.groupByValue)>=0})}).enter().append("rect").attr("x",function(e){return N(e[a])+n(e.groupByValue)+n.bandwidth()/4}).attr("y",function(e){return S(e.predictedYSmooth+e.errNeg)}).attr("width",function(e){return n.bandwidth()/2}).attr("height",function(e){return 1}).attr("stroke-width",3).attr("opacity",1).attr("fill","#75787B");A.selectAll("circle").on("mouseenter",e).on("mouseout",d).on("mousemove",g).attr("cursor","pointer"),A.select(".xAxis").selectAll("line").attr("opacity",.15).style("stroke-dasharray","4, 4"),A.select(".yAxis").selectAll("line").attr("opacity",.15).style("stroke-dasharray","4, 4"),A.select(".xAxis").selectAll("text").attr("x",function(e){return 0});y.selectAll("button").data(o.sort(P.sortAlphaNum)).enter().append("button").attr("class","legend-btn").style("background-color",function(e){return C[a][e]}).style("cursor","pointer").on("click",c).on("mouseover",u).on("mouseout",l).html(function(e){return e})}var t=e(i);A=P.createChart(m,p),P.setTitle(l,"Error Distribution Graph: "+a+" (Grouped by Type) "),A.selectAll("*").remove(),A.attr("width",p);var o=[];i.forEach(function(e){o.indexOf(e.groupByValue)<0&&(o.push(e.groupByValue),V[a].push(e.groupByValue))});var u=140,d=parseInt(p/u),c=Math.ceil(o.length/d);A.attr("height",450+30*c);var N=(d3.stack(),d3.scaleBand().range([g.left,p]).paddingInner(.25)),n=d3.scaleBand().padding(.25),S=d3.scaleLinear().range([h-30,0]);A.append("g").attr("class","xAxis").attr("transform","translate(10,"+(h+30*c+20)+")");var T=A.append("g").attr("class","yAxis").attr("transform","translate(60,70)"),Y=A.append("g").attr("transform","translate(0,70)"),f=(A.append("text").attr("class","label").attr("transform","translate("+p/2+","+(h+30*c+60)+")").style("text-anchor","middle").text(a),A.append("text").attr("class","label").attr("transform","translate(15,"+h/2+")rotate(-90)").style("text-anchor","end").text("Predicted-Quality"),A.append("line").style("opacity",0).attr("x1",0).attr("y1",30*c+20).attr("x2",0).attr("y2",h+30*c).attr("stroke","#75787B"));S.domain([-10,10]);var v=d3.axisLeft().scale(S).tickSizeInner(-p+g.left);T.call(v);var R=A.append("g");r()}var i=T.AppData[e].Data.filter(function(e){return e.groupByVarName==z&&M.indexOf(e.groupByValue)<0});if(0==i.length)return null;var o=i[0],a=Object.keys(o).filter(function(e){return E.indexOf(e)<0})[0],g={top:20,right:15,bottom:30,left:60},p=.74*P.getWidth()-g.left-g.right,h=300-g.top-g.bottom,u=W.append("div").attr("class","chart-lev").attr("id","chlvl-"+a.replace(/[^a-zA-Z]/g,"")).style("height","430px"),l=u.append("div").attr("class","Title"),d=u.append("div").attr("class","app").attr("id",a.replace(/[^a-zA-Z]/g,"")),y=d.append("div").attr("class","legend").attr("width",p-100).attr("height",h-100),m=(d.append("div").attr("class","Filtercontainer"),d.append("div").attr("class","Total"),d.append("div").attr("class","Chartcont")),n=u.append("div").attr("class","desc").style("height","560px"),B=n.append("div").attr("class","desc-text"),V=(d.append("div").attr("class","Source"),d.append("div").attr("class","Attribution"),{});V[a]=[],"Continuous"==T.AppData[e].Type?r():"Categorical"==T.AppData[e].Type&&t()}var V=t(2),S=i(V),T=t(1);t(6);var P=new S.default,Y=d3.select("#App"),f=(Y.append("div").attr("class","heading").append("a").attr("href","https://github.com/Data4Gov/WhiteBox").html("White Box - Prediction Error By Variable"),Y.append("div").attr("class","summary")),v=f.append("div").attr("class","heatMapContainer"),R=f.append("div").attr("class","filt-cont"),W=Y.append("div").attr("class","Chartcontainer"),x=["#86BC25","#00A3E0","#00ABAB","#C4D600","#2C5234","#9DD4CF","#004F59","#62B5E5","#43B02A","#0076A8","#9DD4CF","#012169"],b=!1,q=d3.select("body").append("div").attr("id","tooltip").style("opacity",0);d3.select("body").on("click",function(){b&&(q.style("opacity",0),b=!1)});var w,A,k,E=["predictedYSmooth","groupByVarName","groupByValue","highlight","errNeg","errPos"],L=!0,C={},z="",M=[],G={};k=P.createChart(v,w);var D="Quality",O=[10,50,90];window.togglePercentile=a,window.intializeTreeMap=l,n(),y(),g(),l(T.AppData[0].Data[0].groupByVarName),window.onresize=function(){d3.select(".Chartcontainer").selectAll("*").remove(),w=P.getWidth(),l(T.AppData[0].Data[0].groupByVarName);for(var e=0;e<T.AppData.length;e++)B(e)}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=<***>;r.AppData=t},function(e,r){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),o=function(){function e(){t(this,e)}return i(e,[{key:"setTitle",value:function(e,r){e.selectAll("*").remove();e.append("span").html(r)}},{key:"setLabel",value:function(e,r){e.selectAll("*").remove();e.append("span").html(r)}},{key:"setSource",value:function(e,r){e.selectAll("*").remove(),e.html(r)}},{key:"setAttribution",value:function(e){e.append("p").text("Deloitte University Press | dupress.deloitte.com")}},{key:"createChart",value:function(e,r){var t=e.append("svg");return t.attr("width",r),t}},{key:"buildLegenedGroup",value:function(){}},{key:"formatLabel",value:function(e){return e=parseFloat(e),e=d3.format(".3f")(e),e=e.replace(/\.0$/,"")}},{key:"getWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"sortAlphaNum",value:function(e,r){var t=/[^a-zA-Z]/g,i=/[^0-9]/g,o=e.replace(t,""),a=r.replace(t,"");if(o===a){var g=parseInt(e.replace(i,""),10),p=parseInt(r.replace(i,""),10);return g===p?0:g>p?1:-1}return o>a?1:-1}},{key:"sortDictionary",value:function(e,r){var t=e.name.toLowerCase(),i=r.name.toLowerCase();return t<i?-1:t>i?1:0}}]),e}();r.default=o},function(e,r,t){r=e.exports=t(4)(),r.push([e.id,'/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*,:after,:before{box-sizing:border-box;-webkit-tap-highlight-color:transparent}svg{overflow:visible!important}body,html{background-color:#fff;font-family:Open Sans,sans-serif}#App{overflow:hidden;width:100%}.filt-cont{width:24%;height:50px;float:left;margin-top:22px}.dropdown{width:100%;color:#53565a;position:relative;display:inline-block;margin-left:1%;margin-top:10px}.dropdown-content{display:none;position:absolute;background-color:#fff;z-index:1;width:100%;border:1px solid #00a3e0;border-radius:2px;border-top:none;overflow:auto;max-height:300px}.dropdown-content a{color:#53565a;padding:3px 5px;text-decoration:none;display:block;cursor:pointer}.dropdown-content a:hover{background-color:#00a3e0}.dropdown:hover .dropdown-content{display:block}.dropbtn{color:#53565a;background-color:#fff;font-size:14px;border:none;text-align:left;padding-top:3px;padding-bottom:3px;cursor:pointer;width:100%;height:30px;border:1px solid #00a3e0}.drpbtn:focus{outline:none}.heatMapContainer{height:150px;width:74%;margin-left:1%;padding-top:5px;margin-top:10px;float:left}#tooltip{position:absolute;width:auto;text-align:center;border-radius:5px;pointer-events:none;background-color:#fff;padding:8px;z-index:100;font-size:14px;max-width:300px;border:1px solid rgba(0,0,0,.1);box-shadow:4px 4px 6px rgba(0,0,0,.2);z-index:1000}#tooltip span{font-weight:700;font-size:17px}.Title{color:#000;font-size:16px;font-weight:600;padding:12px;text-align:center;text-decoration:underline;width:99%;float:left}.Source{font-weight:300;font-size:14px;padding-left:12px;padding-right:12px;text-align:left}.Source p{margin:2px}svg text{font-size:14px;fill:#53565a;font-weight:400}.app{width:74%;float:left}.Chartcontainer{margin-top:150px;width:100%;float:left}.summary{padding-top:5px;margin-top:2px;height:150px;box-shadow:2px 2px 4px rgba(0,0,0,.247059);position:fixed;width:98%;top:48px;background-color:#fff;margin-left:1%;z-index:1000}.Chartcontainer button{max-width:200px;height:30px;border:none;margin-left:20px;font-family:Open Sans,sans-serif;font-size:16px;font-weight:600;color:#fff}.Chartcontainer button:focus{outline:0}.tick{font-weight:700}.tick line{opacity:.15}.Chartcontainer button:hover{background-color:#fff;color:#000}.legend{width:90%;margin-left:5%;display:inline-flex;justify-content:center;flex-wrap:wrap;float:left}.legend-btn{width:200px;border:2px solid #53565a!important;border-radius:2px}.label{font-size:12px;font-weight:700}.chart-lev{margin-top:50px;width:98%;box-shadow:2px 2px 4px rgba(0,0,0,.247059);margin-left:1%;display:inline-block}.desc{width:24%;float:left;margin-left:1%}.desc-text{height:320px;width:98%;margin-top:40px;padding:5px;font-size:14px;text-align:justify;overflow-y:auto}.desc-text ul{padding-left:10px}.rect{border:2px solid #53565a}.heading{position:fixed;margin-left:1%;width:98%;height:50px;text-align:center;font-size:36px;color:#00a3e0!important;font-weight:800;box-shadow:2px 2px 4px rgba(0,0,0,.247059);z-index:999;background-color:#fff}.heading a,.heading a:focus{color:#00a3e0}.perc-check{height:50px;width:98%;margin-left:1%;display:block;position:relative;padding-left:5px;margin-top:12px;cursor:pointer;font-size:16px;color:#53565a;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.perc-check input{cursor:pointer}.perc-checkinput,.perc-check input{position:absolute;opacity:0}.perc-checkinput+label{position:relative;cursor:pointer;padding:0;width:20px;height:20px}.perc-checkinput+label:before{content:"";margin-right:10px;display:inline-block;vertical-align:text-top;width:20px;height:20px;background:#00a3e0;color:#86bc25;border:1px solid #fff;border-radius:2px}.perc-checkinput:hover+label:before{background:#00a3e0;color:#00a3e0}.perc-checkinput:checked+label:before{color:#00a3e0;background:#00a3e0;border:1px solid #fff;border-radius:2px}.perc-checkinput:disabled+label{color:#63666a;cursor:auto}.perc-checkinput:disabled+label:before{box-shadow:none;background:#00a3e0}.perc-checkinput:checked+label:after{content:"";position:absolute;left:4px;top:8px;background:#fff;width:3px;height:3px;box-shadow:2px 0 0 #fff,4px 0 0 #fff,4px -2px 0 #fff,4px -4px 0 #fff,4px -6px 0 #fff,4px -8px 0 #fff;transform:rotate(45deg)}',""])},function(e,r){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],r=0;r<this.length;r++){var t=this[r];t[2]?e.push("@media "+t[2]+"{"+t[1]+"}"):e.push(t[1])}return e.join("")},e.i=function(r,t){"string"==typeof r&&(r=[[null,r,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(i[a]=!0)}for(o=0;o<r.length;o++){var g=r[o];"number"==typeof g[0]&&i[g[0]]||(t&&!g[2]?g[2]=t:t&&(g[2]="("+g[2]+") and ("+t+")"),e.push(g))}},e}},function(e,r,t){function i(e,r){for(var t=0;t<e.length;t++){var i=e[t],o=c[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(u(i.parts[a],r))}else{for(var g=[],a=0;a<i.parts.length;a++)g.push(u(i.parts[a],r));c[i.id]={id:i.id,refs:1,parts:g}}}}function o(e){for(var r=[],t={},i=0;i<e.length;i++){var o=e[i],a=o[0],g=o[1],p=o[2],h=o[3],u={css:g,media:p,sourceMap:h};t[a]?t[a].parts.push(u):r.push(t[a]={id:a,parts:[u]})}return r}function a(e,r){var t=m(),i=V[V.length-1];if("top"===e.insertAt)i?i.nextSibling?t.insertBefore(r,i.nextSibling):t.appendChild(r):t.insertBefore(r,t.firstChild),V.push(r);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");t.appendChild(r)}}function g(e){e.parentNode.removeChild(e);var r=V.indexOf(e);r>=0&&V.splice(r,1)}function p(e){var r=document.createElement("style");return r.type="text/css",a(e,r),r}function h(e){var r=document.createElement("link");return r.rel="stylesheet",a(e,r),r}function u(e,r){var t,i,o;if(r.singleton){var a=B++;t=n||(n=p(r)),i=l.bind(null,t,a,!1),o=l.bind(null,t,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=h(r),i=y.bind(null,t),o=function(){g(t),t.href&&URL.revokeObjectURL(t.href)}):(t=p(r),i=d.bind(null,t),o=function(){g(t)});return i(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;i(e=r)}else o()}}function l(e,r,t,i){var o=t?"":i.css;if(e.styleSheet)e.styleSheet.cssText=S(r,o);else{var a=document.createTextNode(o),g=e.childNodes;g[r]&&e.removeChild(g[r]),g.length?e.insertBefore(a,g[r]):e.appendChild(a)}}function d(e,r){var t=r.css,i=r.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function y(e,r){var t=r.css,i=r.sourceMap;i&&(t+="\\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([t],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var c={},N=function(e){var r;return function(){return"undefined"==typeof r&&(r=e.apply(this,arguments)),r}},s=N(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=N(function(){return document.head||document.getElementsByTagName("head")[0]}),n=null,B=0,V=[];e.exports=function(e,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=s()),"undefined"==typeof r.insertAt&&(r.insertAt="bottom");var t=o(e);return i(t,r),function(e){for(var a=[],g=0;g<t.length;g++){var p=t[g],h=c[p.id];h.refs--,a.push(h)}if(e){var u=o(e);i(u,r)}for(var g=0;g<a.length;g++){var h=a[g];if(0===h.refs){for(var l=0;l<h.parts.length;l++)h.parts[l]();delete c[h.id]}}}};var S=function(){var e=[];return function(r,t){return e[r]=t,e.filter(Boolean).join("\\n")}}()},function(e,r,t){var i=t(3);"string"==typeof i&&(i=[[e.id,i,""]]);t(5)(i,{});i.locals&&(e.exports=i.locals)}]);
