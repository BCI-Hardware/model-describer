!function(e){function r(a){if(o[a])return o[a].exports;var p=o[a]={exports:{},id:a,loaded:!1};return e[a].call(p.exports,p,p.exports,r),p.loaded=!0,p.exports}var o={};return r.m=e,r.c=o,r.p="",r(0)}([function(e,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function p(e,r){var o=e.data.name;E.indexOf(o)>=0?(E.splice(E.indexOf(o),1),d3.select(this).attr("fill",O.heat[o])):(E.push(o),d3.select(this).attr("fill","#A7A8AA")),v.selectAll("*").remove();for(var a=0;a<Y.AppData.length;a++)T(a)}function t(){w=document.getElementById("percentileCheck").checked,d3.select(".Chartcontainer").selectAll("*").remove(),L=n.getWidth(),l(Y.AppData[0].Data[0].groupByVarName)}function u(){var e=m(),r=x.append("div").attr("class","dropdown");r.append("button").attr("class","dropbtn").html("<b>Group By:</b> "+I).append("span").style("float","right").html(" ▼");var o=r.append("div").attr("class","dropdown-content");o.selectAll("a").data(e).enter().append("a").html(function(e){return e}).attr("onclick",function(e){return"intializeTreeMap('"+e+"')"});x.append("div").attr("class","perc-check").html("<input id='percentileCheck' class='perc-checkinput' checked='true' onchange='togglePercentile()' type='checkbox'><label for='percentileCheck'>Percentiles</label>")}function d(e,r){setTimeout(function(){A=!0},300);var o=G.statData.filter(function(r){return r.groupByVarName==I&&r.groupByValue==e.data.name})[0],a=G.proportion.filter(function(r){return r.name==e.data.name})[0];D.style("opacity",1).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px").style("color",O.heat[e]).html("Group <b>"+o.groupByValue+" </b> is "+a.perc+"% of the data and has an average error of <b>"+n.formatLabel(o.MSE)+"</b>")}function i(e,r){setTimeout(function(){A=!0},300);var o=G.statData.filter(function(r){return r.groupByVarName==I&&r.groupByValue==e.data.name})[0],a=G.proportion.filter(function(r){return r.name==e.data.name})[0];D.style("opacity",1).style("left",d3.event.pageX+"px").style("top",d3.event.pageY+"px").style("color",O.heat[e.data.name]).html("Group <b>"+o.groupByValue+" </b> is "+n.formatLabel(a.perc)+"% of the data and has an average error of <b>"+n.formatLabel(o.MSE)+"</b>")}function y(e,r){D.style("opacity",0)}function l(e){function r(e){return e.children?0:1}function o(e){return e.size}I=e,h(),d3.select(".dropbtn").html("<b>Group By:</b> "+I).append("span").style("float","right").html(" ▼");var a=g(I),t={top:50,right:15,bottom:30,left:60};M.selectAll("*").remove();var u=.8*n.getWidth()-.1*t.left-t.right-.1*n.getWidth(),l=200-t.top-t.bottom;M.attr("width",u),M.attr("height",l);var m=function(e){return d3.interpolateRgb(e,"#fff")(.2)},B=(d3.scaleOrdinal(d3.schemeCategory20.map(m)),d3.format(",d"),d3.treemap().tile(d3.treemapResquarify).size([u,l-20]).round(!0).paddingInner(2)),c=d3.hierarchy(a).eachBefore(function(e){e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name}).sum(o).sort(function(e,r){return r.data.name-e.data.name});G.proportion=c.data.children;var V=0;for(var s in G.proportion)V+=G.proportion[s].size;for(var s in G.proportion)G.proportion[s].perc=100*G.proportion[s].size/V;B(c);var S=M.append("g").attr("class","cell-group").attr("transform","translate(0,20)"),N=S.selectAll("g").data(c.leaves()).enter().append("g").attr("transform",function(e){return"translate("+e.x0+","+e.y0+")"});N.append("rect").attr("id",function(e){return e.data.id+" brdr"}).attr("x",-2).attr("y",-2).attr("class","borderpath").attr("width",function(e){return e.x1-e.x0+4}).attr("height",function(e){return e.y1-e.y0+4}).attr("fill",function(e){return"#53565A"}).style("cursor","pointer"),N.append("rect").attr("id",function(e){return e.data.id}).attr("class","rect").attr("width",function(e){return e.x1-e.x0}).attr("height",function(e){return e.y1-e.y0}).attr("fill",function(e){return O.heat[e.data.name]}).on("click",p).on("mouseenter",d).on("mouseout",y).on("mousemove",i).style("cursor","pointer"),N.append("text").attr("clip-path",function(e){return"url(#clip-"+e.data.id+")"}).attr("dx",10).attr("dy",20).text(function(e){if(e.x1-e.x0>100){var r=G.statData.filter(function(r){return r.groupByVarName==I&&r.groupByValue==e.data.name})[0],o=G.proportion.filter(function(r){return r.name==e.data.name})[0];return"Category: "+r.groupByValue+" ("+n.formatLabel(o.perc)+"%)"}return""}).style("fill","#fff"),N.append("text").attr("clip-path",function(e){return"url(#clip-"+e.data.id+")"}).attr("dx",10).attr("dy",40).text(function(e){if(e.x1-e.x0>100){var r=G.statData.filter(function(r){return r.groupByVarName==I&&r.groupByValue==e.data.name})[0];return"Average Error: "+n.formatLabel(r.MSE)}return""}).style("fill","#fff"),d3.selectAll("input").data([o,r],function(e){return e?e.name:this.value}),v.selectAll("*").remove();for(var f=0;f<Y.AppData.length;f++)T(f)}function g(e){var r={name:"heatMap",children:[]},o=Y.AppData[0].Data,a=o.filter(function(r){return r.groupByVarName==e}),p=G.statData.filter(function(r){return r.groupByVarName==e}),t=d3.nest().key(function(e){return e.groupByValue}).rollup(function(e){return e.length}).entries(a);return t.forEach(function(e){var o={};o.name=e.key,o.size=p.filter(function(r){return r.groupByValue==e.key})[0].Total,r.children.push(o)}),r.children=r.children.sort(n.sortDictionary),r}function m(){var e=[];return Y.AppData.forEach(function(r){r.Data.forEach(function(r){e.indexOf(r.groupByVarName)<0&&e.push(r.groupByVarName)})}),e}function B(e,r,o,a){var p=e.filter(function(e){return e.groupByValue==o});if(100==r){var t=p[p.length-1][a];return n.formatLabel(t)}var u=r/100*(p.length+1),d=parseInt(u),t=p[d][a];return n.formatLabel(t)}function c(e,r,o){var a=d3.extent(e.map(function(e){return e[r]})),p={},t={};t.overEst="",t.underEst="",p.quartiles=[];for(var u=(d3.quantile(a,.25)-d3.min(a),1);u<=4;u++)for(var d in o){var i=o[d],y={};y.quarter=u,y.group=i;var l=B(e,25*(u-1),i,r),g=B(e,25*u,i,r);y.range=[l,g];var m=e.filter(function(e){return e[r]>=l&&e[r]<=g&&e.groupByValue==i});y.averageImpact=d3.mean(m.map(function(e){return e.predictedYSmooth})),y.medianImpact=d3.median(m.map(function(e){return e.predictedYSmooth})),y.estimate=Math.abs(d3.mean(m.map(function(e){return e.predictedYSmooth}))/d3.mean(m.map(function(e){return e.predictedYSmooth}))),y.estimate>=1?t.overEst+=n.formatLabel(l)+"-"+n.formatLabel(g)+", ":t.underEst+=n.formatLabel(l)+"-"+n.formatLabel(g)+", ",p.quartiles.push(y)}return t.lowest=d3.min(p.quartiles.map(function(e){return e.averageImpact})),t.highest=d3.max(p.quartiles.map(function(e){return e.averageImpact})),t.lowestGroup=p.quartiles.filter(function(e){return e.averageImpact==t.lowest})[0].group,t.lowestGroup=t.lowestGroup.indexOf("Bin")>=0?"for group "+t.lowestGroup.split("_")[1]:" for "+t.lowestGroup,t.highestGroup=p.quartiles.filter(function(e){return e.averageImpact==t.highest})[0].group,t.highestGroup=t.highestGroup.indexOf("Bin")>=0?"for group "+t.highestGroup.split("_")[1]:" for "+t.highestGroup,t.lowestQuartile=p.quartiles.filter(function(e){return e.averageImpact==t.lowest})[0].range,t.highestQuartile=p.quartiles.filter(function(e){return e.averageImpact==t.highest})[0].range,t.lowestRange=t.lowestQuartile,t.highestRange=t.highestQuartile,t.overAllAverageImpact=d3.mean(e.map(function(e){return e.predictedYSmooth})),t.overAllMedianImpact=d3.median(e.map(function(e){return e.predictedYSmooth})),t.diffMaxOverall=t.highest-t.overAllMedianImpact,t.diffMaxMin=t.highest-t.lowest,t}function V(e,r,o,a){var p=d3.extent(e.map(function(e){return e[r]})),t={},u={};u.overEst="",u.underEst="",t.quartiles=[];var d=d3.quantile(p,.25)-d3.min(p);for(var i in a)for(var y in o){var l=a[i],g=o[y],m={};m.quarter=l,m.group=g;var B=e.filter(function(e){return e[r]==l&&e.groupByValue==g});m.averageImpact=d3.mean(B.map(function(e){return e.predictedYSmooth})),m.medianImpact=d3.median(B.map(function(e){return e.predictedYSmooth})),m.estimate=Math.abs(d3.mean(B.map(function(e){return e.predictedYSmooth}))/d3.mean(B.map(function(e){return e.predictedYSmooth}))),m.estimate>=1?u.overEst+=l+", ":u.underEst+=l+", ",t.quartiles.push(m)}return u.lowest=d3.min(t.quartiles.map(function(e){return e.averageImpact})),u.highest=d3.max(t.quartiles.map(function(e){return e.averageImpact})),u.lowestGroup=t.quartiles.filter(function(e){return e.averageImpact==u.lowest})[0].group,u.lowestGroup=u.lowestGroup.indexOf("Bin")>=0?"for group "+u.lowestGroup.split("_")[1]:" for "+u.lowestGroup,u.highestGroup=t.quartiles.filter(function(e){return e.averageImpact==u.highest})[0].group,u.highestGroup=u.highestGroup.indexOf("Bin")>=0?"for group "+u.highestGroup.split("_")[1]:" for "+u.highestGroup,u.lowestQuartile=t.quartiles.filter(function(e){return e.averageImpact==u.lowest})[0].quarter,u.highestQuartile=t.quartiles.filter(function(e){return e.averageImpact==u.highest})[0].quarter,u.lowestRange=[n.formatLabel(d3.min(p)+d*(u.lowestQuartile-1)),n.formatLabel(d3.min(p)+d*u.lowestQuartile)],u.highestRange=[n.formatLabel(d3.min(p)+d*(u.highestQuartile-1)),n.formatLabel(d3.min(p)+d*u.highestQuartile)],u.overAllAverageImpact=d3.mean(e.map(function(e){return e.predictedYSmooth})),u.overAllMedianImpact=d3.median(e.map(function(e){return e.predictedYSmooth})),u.diffMaxOverall=u.highest-u.overAllMedianImpact,u.diffMaxMin=u.highest-u.lowest,u}function h(){for(var e=[],r=0;r<Y.AppData.length;r++){var o=Y.AppData[r].Data.filter(function(e){return e.groupByVarName==I});if(o.length>0){var a=o[0],p=Object.keys(a).filter(function(e){return H.indexOf(e)<0})[0];O[p]={},O.heat={},o.forEach(function(r){e.indexOf(r.groupByValue)<0&&e.push(r.groupByValue)}),e.sort(n.sortAlphaNum),e.forEach(function(e,r){O[p][e]=b[r]})}}e.forEach(function(e,r){O.heat[e]=b[r]})}function s(){Y.AppData.filter(function(e,r){"Accuracy"==e.Type&&(G.statData=e.Data,Y.AppData.splice(r,1))})}function T(e){function r(){function r(a){function i(r,o){d3.selectAll(".layer"+e).style("opacity",.25),d3.selectAll(".path"+r+e).style("opacity",1).style("stroke","black").attr("stroke-width","1px")}function y(r,o){d3.selectAll(".layer"+e).style("opacity",1).attr("stroke-width","0")}function m(e){var r=o();D.style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return u>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY-28+"px").style("opacity",1),q.transition().style("opacity",1).attr("x1",W(r)+10).attr("x2",W(r)+10);var a=S.filter(function(e){return e[t]==r});D.html("Within the <span>"+e.key+" </span> group, the model believes that increasing <span>"+t+"</span> from <span> "+n.formatLabel(a[0][t])+" </span> to <span>"+n.formatLabel(parseFloat(a[0][t])+parseFloat(f))+"</span> leads to, on average, a <span>"+Math.abs(n.formatLabel(a[0][e.key]))+(n.formatLabel(a[0][e.key])>=0?" increase":" decrease")+"</span> in "+k)}function V(r){d3.selectAll(".layer"+e).style("opacity",1).attr("stroke-width",0),D.transition().style("opacity",0),A=!1,q.transition().style("opacity",0)}function h(r,a){var p=o();setTimeout(function(){A=!0},300);var d=S.filter(function(e){return e[t]==p});D.attr("class","colorClass"+e+a),D.transition().duration(200).delay(100).style("opacity",1),D.html("Within the <span>"+r.key+" </span> group, the model believes that increasing <span>"+t+"</span> from <span> "+n.formatLabel(d[0][t])+" </span> to <span>"+n.formatLabel(parseFloat(d[0][t])+parseFloat(f))+"</span> leads to, on average, a <span>"+Math.abs(n.formatLabel(d[0][r.key]))+(n.formatLabel(d[0][r.key])>=0?" increase":" decrease")+"</span> in "+k).style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return u>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY-28+"px"),D.style("color",O[t][r.key]),d3.selectAll(".layer"+e).style("opacity","0.4"),d3.select(this).style("opacity",1).style("stroke","black").attr("stroke-width","1px")}function Y(e,o){T[t].indexOf(e)>=0?(T[t].splice(T[t].indexOf(e),1),r(!1),d3.select(this).style("opacity",.5).style("background-color","#A7A8AA")):(T[t].push(e),r(!1),d3.select(this).style("opacity",1).style("background-color",O[t][e]))}var R=0,z=0,X=[];S.filter(function(e){var r={};r[t]=e[t],T[t].forEach(function(o){r[o]=e[o]}),X.push(r)});var Q=c(p,t,T[t]);s.html("<ul style='list-style-type:disc' > <li>Across all categories, the impact of <b>"+t+" </b> on <b>"+k+"</b> is lowest from <b> ["+Q.lowestRange+"] </b> "+Q.lowestGroup+" and highest from <b> ["+Q.highestRange+"] </b> "+Q.highestGroup+"</li> <li> The impact of <b>"+t+" </b>  on <b>"+k+"</b> from <b> ["+Q.highestRange+"]  </b>"+Q.highestGroup+" is  "+n.formatLabel(Q.diffMaxOverall)+" higher than the overall median imapct and "+n.formatLabel(Q.diffMaxMin)+" higher than the average impact from <b> ["+Q.lowestRange+"] </b>"+Q.lowestGroup+"</li> </ul>");var U=[];for(var F in C){var P=0,_=0;for(var Z in T[t]){var J=T[t][Z],$=B(p,C[F],J,t),K=G.proportion.filter(function(e){return e.name==J})[0].perc/100;P+=$*K,_+=K}U.push({percentile:C[F],value:n.formatLabel(P/_)})}X=X.sort(function(e,r){return e[t]-r[t]}),W.domain(d3.extent(X,function(e){return e[t]}));var ee=d3.stack().keys(T[t].sort(n.sortAlphaNum)).order(d3.stackOrderAscending);ee(X).forEach(function(e){var r=0;e.forEach(function(e){r+=e[1],d3.min([e[0],e[1]])<R&&(R=d3.min([e[0],e[1]])),d3.max([e[0],e[1]])>z&&(z=d3.max([e[0],e[1]]))})}),x.domain([R,z]);var re=d3.axisBottom().scale(W);if(I.transition().duration(1e3).call(j),w){var oe=H.selectAll("line").data(U);oe.exit().remove(),oe.enter().append("line").style("opacity",1).attr("x1",function(e){return W(e.value)}).attr("y1",30*N+40).attr("x2",function(e){return W(e.value)}).attr("y2",d+30*N+20).attr("stroke","#75787B").attr("stroke-width","2px"),oe.transition().attr("x1",function(e){return W(e.value)}).attr("y1",30*N+40).attr("x2",function(e){return W(e.value)}).attr("y2",d+30*N+20).attr("stroke","#75787B").attr("stroke-width","2px");var ae=L.selectAll("text").data(U);ae.exit().remove(),ae.enter().append("text").text(function(e){return e.percentile}).attr("transform",function(e,r){return"translate("+(W(e.value)-5)+",65)"}),ae.transition().text(function(e){return e.percentile}).attr("transform",function(e,r){return"translate("+(W(e.value)-5)+",65)"})}E.selectAll(".path").remove();var pe=E.selectAll(".path").data(ee(X));pe.exit().transition().duration(500).remove(),pe.enter().append("path").attr("class",function(r,o){return"path layer"+r.key+" path"+r.key+e+" layer"+e}).attr("transform","translate(10,"+(30*N+40)+")").on("mouseenter",h).on("mousemove",m).on("mouseout",V).attr("d",b).transition().duration(1e3).attr("d",v).attr("fill",function(e,r){return O[t][e.key]}).attr("cursor","pointer"),pe.attr("class",function(r,o){return"layer"+r.key+" path"+r.key+e+" layer"+e}).on("mouseenter",h).on("mousemove",m).on("mouseout",V).transition().duration(1e3).attr("d",v).attr("fill",function(e,r){return O[t][e.key]}).attr("transform","translate(10,"+(30*N+40)+")").attr("cursor","pointer"),I.selectAll("line").attr("opacity",.05).style("stroke-dasharray","5, 5"),M.call(re);g.selectAll("button").data(l.sort(n.sortAlphaNum)).enter().append("button").attr("class","legend-btn").style("background-color",function(e){return O[t][e]}).style("cursor","pointer").on("click",Y).on("mouseover",i).on("mouseout",y).html(function(e){return e})}function o(){var e=W.invert(d3.event.pageX-.02*n.getWidth()),r=S.map(function(e){return e[t]}),o=i(e,r);return o}function i(e,r){for(var o=r[0],a=Math.abs(e-o),p=0;p<r.length;p++){var t=Math.abs(e-r[p]);t<a&&(a=t,o=r[p])}return o}z=n.createChart(m,u),n.setTitle(y,"Impact of Increasing "+t+" by "+f+(Y.AppData[e].Change.indexOf("Default")>=0?" (1 standard deviation) ":"")+" on "+k),z.selectAll("*").remove(),z.attr("width",u);var l=[];p.forEach(function(e){l.indexOf(e.groupByValue)<0&&l.push(e.groupByValue)}),l=l.sort(n.sortAlphaNum);var V=140,h=parseInt(u/V),N=Math.ceil(l.length/h),R=z.append("g").attr("transform","translate(100,"+(d+30*N+55)+")");R.append("line").attr("x1",0).attr("y1",0).attr("x2",20).attr("y2",0).attr("stroke","#75787B").attr("stroke-width","3px"),R.append("text").text("Percentile").attr("x",30).attr("y",5);z.attr("height",300+30*N);var W=d3.scaleLinear().range([a.left,u]),x=d3.scaleLinear().range([d-30,0]),v=(d3.interpolateCool,d3.area().x(function(e){return W(e.data[t])}).y0(function(e){return x(e[0])}).y1(function(e){return x(e[1])}).curve(d3.curveBasis)),b=d3.area().x(function(e){return W(e.data[t])}).y0(function(e){return x(0)}).y1(function(e){return x(0)}).curve(d3.curveBasis),H=z.append("g").attr("class","percRefLines").attr("transform","translate(10,0)"),L=z.append("g").attr("class","textRefLines").attr("transform","translate(10,0)"),M=z.append("g").attr("class","xAxis").attr("transform","translate(10,"+(d+30*N+20)+")"),I=z.append("g").attr("class","yAxis").attr("transform","translate(60,70)"),E=z.append("g"),q=(z.append("text").attr("class","label").attr("transform","translate("+u/2+","+(d+30*N+60)+")").style("text-anchor","middle").text(t),z.append("text").attr("class","label").attr("transform","translate(15,"+(d-50)+")rotate(-90)").style("text-anchor","middle").text("Impact on "+k),z.append("line").style("opacity",0).attr("x1",0).attr("y1",30*N).attr("x2",0).attr("y2",d+30*N+20).attr("stroke","#75787B"));x.domain([-1,1]);var j=d3.axisLeft().scale(x).tickSizeInner(-u+a.left);I.call(j),r(!1)}function o(){function r(e){var r=[];return e.forEach(function(e){r.indexOf(e[t])<0&&r.push(e[t])}),r}function o(){function r(r,o){D.attr("class","colorClass"+e+o),D.transition().duration(200).delay(100).style("opacity",1),D.html("Within the <span>"+r.key+" </span> group, the model believes that increasing <span>"+t+"</span> from <span> "+r.parent+" </span> to <span>"+f+"</span> leads to, on average, a <span>"+Math.abs(n.formatLabel(r.value))+(n.formatLabel(r.value)>=0?" increase":" decrease")+"</span> in "+k).style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return u>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY-28+"px"),D.style("color",O[t][r]),d3.selectAll(".layer"+e).style("opacity","0.4"),d3.select(this).style("opacity",1).style("stroke","black").attr("stroke-width","1px")}function a(r,o){D.attr("class","colorClass"+e+o),D.transition().duration(200).delay(100).style("opacity",1),D.html("Within the <span>"+r.key+" </span> group, the model believes that increasing <span>"+t+"</span> from <span> "+r.parent+" </span> to <span>"+f+"</span> leads to, on average, a <span>"+Math.abs(n.formatLabel(r.value))+(n.formatLabel(r.value)>=0?" increase":" decrease")+"</span> in "+k).style("left",function(){var e=this.getBoundingClientRect().width,r=d3.event.pageX;return u>e+r+25?d3.event.pageX+5+"px":d3.event.pageX-e-5<10?"10px":d3.event.pageX-e-5+"px"}).style("top",d3.event.pageY-28+"px"),D.style("color",O[t][r.key]),d3.selectAll(".layer"+e).style("opacity","0.4"),d3.select(this).style("opacity",1).style("stroke","black").attr("stroke-width","1px")}function d(e,r){D.transition().style("opacity",0),A=!1,b.transition().style("opacity",0),d3.select(this).attr("stroke-width","0px")}function y(e,r){d3.selectAll(".rect"+e.replace(/[^a-zA-Z]/g,"")).style("stroke","black").attr("stroke-width","1px")}function m(e,r){d3.selectAll(".rect"+e.replace(/[^a-zA-Z]/g,"")).style("stroke","black").attr("stroke-width","0px")}function c(e,r){T[t].indexOf(e)>=0?(T[t].splice(T[t].indexOf(e),1),o(!1),d3.select(this).style("opacity",.5).style("background-color","#A7A8AA")):(T[t].push(e),o(!1),d3.select(this).style("opacity",1).style("background-color",O[t][e]))}function h(e,r){e.each(function(){for(var e,o=d3.select(this),a=o.text().split(/\s+/).reverse(),p=[],u=0,d=1.1,y=o.attr("y"),l=parseFloat(o.attr("dy")),g=o.text(null).append("tspan").attr("x",0).attr("y",y).attr("dy",l+"em");e=a.pop();)p.push(e),g.text(p.join(" ")),g.node().getComputedTextLength()>r&&(p.pop(),g.text(p.join(" ")),p=[e],g=o.append("tspan").attr("x",0).attr("y",y).attr("dy",++u*d+l+"em").text(e));i=d3.max([430+20*u,i]),d3.select("#topchlvl-"+t.replace(/[^a-zA-Z]/g,"")).style("height",i+"px")})}z=d3.select("#chlvl-"+t.replace(/[^a-zA-Z]/g,"")).select("svg");var N=B.filter(function(e){return T[t].indexOf(e)>=0}),w=0,C=0;S.forEach(function(e){var r=d3.min(N,function(r){return e[r]}),o=d3.max(N,function(r){return e[r]});r<w&&(w=r),o>C&&(C=o)}),w=w>0?.9*w:1.1*w,C=C>0?1.1*C:.9*C;var L=[w>0?0:w,C<0?0-.1*w:C];Y.domain(l),R.domain(N).rangeRound([0,Y.bandwidth()]),W.domain(L);var M=V(p,t,T[t],l);s.html("<ul style='list-style-type:disc' > <li>Across all categories, the impact of <b>"+t+" </b> on <b>"+k+"</b> is lowest for <b> "+M.lowestQuartile+" </b>  "+M.lowestGroup+" and highest for <b> "+M.highestQuartile+" </b> "+M.highestGroup+"</li> <li> The impact of <b>"+t+" </b>  on <b>"+k+"</b> for <b>"+M.highestQuartile+" </b> "+M.highestGroup+" is  "+n.formatLabel(M.diffMaxOverall)+" higher than the overall median impact and "+n.formatLabel(M.diffMaxMin)+" higher than the average impact from <b>"+M.lowestQuartile+"</b> "+M.lowestGroup+"</li>  </ul>");var I=d3.axisBottom().scale(Y);x.transition().duration(1e3).call(H),v.selectAll("g").remove(),v.selectAll("g").data(l).enter().append("g").attr("transform",function(e){return"translate("+Y(e)+",0)"}).selectAll("rect").data(function(e){return N.map(function(r){if(T[t].indexOf(r)>=0){var o={};return o.parent=e,o.key=r,o.value=S.filter(function(r){return r[t]==e})[0][r],o}})}).enter().append("rect").attr("class",function(e){return"rect"+e.key.replace(/[^a-zA-Z]/g,"")}).attr("x",function(e){return R(e.key)}).attr("y",function(e){return W(W(e.value)>=W(0)?0:e.value)}).attr("width",R.bandwidth()).attr("height",function(e){return W(e.value)-W(0)>=0?W(e.value)-W(0):W(0)-W(e.value)}).attr("fill",function(e,r){return O[t][e.key]}).on("mouseover",r).on("mousemove",a).on("mouseout",d).style("cursor","pointer"),x.selectAll("line").attr("opacity",.15).style("stroke-dasharray","4, 4"),z.select(".xAxis").call(I).attr("transform","translate(0,"+(W(0)+70)+")"),z.select(".xAxis").selectAll("text").attr("x",function(e){return 0}).attr("transform","translate(0,"+(W(L[0])-W(0))+")").call(h,.9*Y.bandwidth());g.selectAll("button").data(B).enter().append("button").attr("class","legend-btn").style("background-color",function(e){return O[t][e]}).on("click",c).on("mouseover",y).on("mouseout",m).style("cursor","pointer").html(function(e){return e})}var i=0,l=r(S);z=n.createChart(m,u);var B=[];p.forEach(function(e){B.indexOf(e.groupByValue)<0&&B.push(e.groupByValue)}),n.setTitle(y,"Sensitivity Plot: Impact of changing "+t+" to "+f),B=B.sort(n.sortAlphaNum),z.selectAll("*").remove(),z.attr("width",u);var c=140,h=parseInt(u/c),N=Math.ceil(B.length/h);z.attr("height",300+30*N);var Y=d3.scaleBand().range([a.left,u]).paddingInner(.25),R=d3.scaleBand().padding(.25),W=d3.scaleLinear().range([d,0]);z.append("g").attr("class","xAxis").attr("transform","translate(10,"+(d+30*N+20)+")");var x=z.append("g").attr("class","yAxis").attr("transform","translate(60,70)"),v=z.append("g").attr("transform","translate(0,70)"),b=(z.append("text").attr("class","label").attr("transform","translate("+u/2+","+30*N+")").style("text-anchor","middle").text(t),z.append("text").attr("class","label").attr("transform","translate(15,"+(d-50)+")rotate(-90)").style("text-anchor","middle").text("Impact on "+k),z.append("line").style("opacity",0).attr("x1",0).attr("y1",30*N).attr("x2",0).attr("y2",d+30*N+10).attr("stroke","#75787B"));W.domain([-1,1]);var H=d3.axisLeft().scale(W).tickSizeInner(-u+a.left);x.call(H),o()}var a={top:30,right:15,bottom:60,left:60},p=Y.AppData[e].Data.filter(function(e){return e.groupByVarName==I&&E.indexOf(e.groupByValue)<0});if(0==p.length)return null;var t=Object.keys(Y.AppData[e].Data[0]).filter(function(e){return H.indexOf(e)<0})[0],u=.74*n.getWidth()-a.left-a.right,d=300-a.top-a.bottom,i=v.append("div").attr("class","chart-lev").attr("id","topchlvl-"+t.replace(/[^a-zA-Z]/g,"")).style("height","430px"),y=i.append("div").attr("class","Title"),l=i.append("div").attr("class","app").attr("id","chlvl-"+t.replace(/[^a-zA-Z]/g,"")),g=l.append("div").attr("class","legend").attr("width",u-100).attr("height",d-100),m=(l.append("div").attr("class","Filtercontainer"),l.append("div").attr("class","Total"),l.append("div").attr("class","Chartcont")),h=i.append("div").attr("class","desc").style("height","560px"),s=h.append("div").attr("class","desc-text").html("Few Insights will come here"),T=(l.append("div").attr("class","Source"),l.append("div").attr("class","Attribution"),{});T[t]=[],p.forEach(function(e){T[t].indexOf(e.groupByValue)<0&&T[t].push(e.groupByValue)});var S=[],N=d3.nest().key(function(e){return e[t]}).entries(p);N.forEach(function(r){var o={};o[t]="Continuous"==Y.AppData[e].Type?parseFloat(r.key):r.key,T[t].forEach(function(e){var a=r.values.filter(function(r){return r.groupByValue==e});1==a.length?o[e]=a[0].predictedYSmooth:o[e]=null}),S.push(o)});var f="";S[0];"Continuous"==Y.AppData[e].Type?(f=n.formatLabel(Y.AppData[e].Change.indexOf("Default")>=0?Y.AppData[e].Change.split(":")[1]:Y.AppData[e].Change),r()):"Categorical"==Y.AppData[e].Type&&(f=Y.AppData[e].Change.indexOf("Default")>=0?Y.AppData[e].Change.split(":")[1]:Y.AppData[e].Change,o())}var S=o(2),N=a(S),Y=o(1);o(6);var n=new N.default,f=d3.select("#App"),R=(f.append("div").attr("class","heading").append("a").attr("href","https://github.com/Data4Gov/WhiteBox").html("White Box - Impact By Variable"),f.append("div").attr("class","summary")),W=R.append("div").attr("class","heatMapContainer"),x=R.append("div").attr("class","filt-cont"),v=f.append("div").attr("class","Chartcontainer"),b=["#86BC25","#00A3E0","#00ABAB","#C4D600","#2C5234","#9DD4CF","#004F59","#62B5E5","#43B02A","#0076A8","#9DD4CF","#012169"],H=["predictedYSmooth","groupByVarName","groupByValue","highlight","errNeg","errPos"],w=!0,k="Quality",A=!1,C=[10,50,90],D=d3.select("body").append("div").attr("id","tooltip").style("opacity",0);d3.select("body").on("click",function(){A&&(D.style("opacity",0),A=!1)});var L,z,M,O={},I="",E=[],G={};M=n.createChart(W,L),window.togglePercentile=t,window.intializeTreeMap=l,s(),m(),u(),l(Y.AppData[0].Data[0].groupByVarName),window.onresize=function(){d3.select(".Chartcontainer").selectAll("*").remove(),L=n.getWidth(),l(Y.AppData[0].Data[0].groupByVarName)}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=<***>;r.AppData=o},function(e,r){"use strict";function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,o,a){return o&&e(r.prototype,o),a&&e(r,a),r}}(),p=function(){function e(){o(this,e)}return a(e,[{key:"setTitle",value:function(e,r){e.selectAll("*").remove();e.append("span").html(r)}},{key:"setLabel",value:function(e,r){e.selectAll("*").remove();e.append("span").html(r)}},{key:"setSource",value:function(e,r){e.selectAll("*").remove(),e.html(r)}},{key:"setAttribution",value:function(e){e.append("p").text("Deloitte University Press | dupress.deloitte.com")}},{key:"formatLabel",value:function(e){return e=d3.format(".3f")(e),e=e.replace(/\.0$/,"")}},{key:"createChart",value:function(e,r){var o=e.append("svg");return o.attr("width",r),o}},{key:"buildLegenedGroup",value:function(){}},{key:"getWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"sortDictionary",value:function(e,r){var o=e.name.toLowerCase(),a=r.name.toLowerCase();return o<a?-1:o>a?1:0}},{key:"sortAlphaNum",value:function(e,r){var o=/[^a-zA-Z]/g,a=/[^0-9]/g,p=e.replace(o,""),t=r.replace(o,"");if(p===t){var u=parseInt(e.replace(a,""),10),d=parseInt(r.replace(a,""),10);return u===d?0:u>d?1:-1}return p>t?1:-1}}]),e}();r.default=p},function(e,r,o){r=e.exports=o(4)(),r.push([e.id,'/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*,:after,:before{box-sizing:border-box;-webkit-tap-highlight-color:transparent}svg{overflow:visible!important}body,html{background-color:#fff;font-family:Open Sans,sans-serif}#App{overflow:hidden;width:100%}.heading{position:fixed;margin-left:1%;width:98%;height:50px;text-align:center;font-size:36px;color:#00a3e0;font-weight:800;box-shadow:2px 2px 4px rgba(0,0,0,.247059);z-index:999;background-color:#fff}.filt-cont{width:24%;height:50px;float:left;margin-top:22px}.dropdown{width:100%;color:#53565a;position:relative;display:inline-block;margin-left:1%;margin-top:10px}.dropdown-content{display:none;position:absolute;background-color:#fff;z-index:1;width:100%;border:1px solid #00a3e0;border-radius:2px;border-top:none;overflow:auto;max-height:300px}.dropdown-content a{color:#53565a;padding:3px 5px;text-decoration:none;display:block;cursor:pointer}.dropdown-content a:hover{background-color:#00a3e0}.dropdown:hover .dropdown-content{display:block}.dropbtn{color:#53565a;background-color:#fff;font-size:14px;border:none;text-align:left;padding-top:3px;padding-bottom:3px;cursor:pointer;width:100%;height:30px;border:1px solid #00a3e0}.drpbtn:focus{outline:none}.heatMapContainer{height:150px;width:74%;margin-left:1%;padding-top:5px;margin-top:10px;float:left}#tooltip{position:absolute;width:auto;text-align:center;border-radius:5px;pointer-events:none;background-color:#fff;padding:8px;z-index:100;font-size:14px;max-width:300px;border:1px solid rgba(0,0,0,.1);box-shadow:4px 4px 6px rgba(0,0,0,.2);z-index:1000}#tooltip span{font-weight:700;font-size:17px}.Title{color:#000;font-size:16px;font-weight:600;padding:12px;text-align:center;text-decoration:underline;width:99%;float:left}.Source{font-weight:300;font-size:14px;padding-left:12px;padding-right:12px;text-align:left}.Source p{margin:2px}svg text{font-size:14px;fill:#53565a;font-weight:400}.app{width:74%;float:left}.Chartcontainer{margin-top:150px;width:100%;float:left}.summary{padding-top:5px;margin-top:2px;height:150px;box-shadow:2px 2px 4px rgba(0,0,0,.247059);position:fixed;width:98%;top:48px;background-color:#fff;margin-left:1%;z-index:1000}.Chartcontainer button{max-width:200px;height:30px;border:none;margin-left:20px;margin-bottom:3px;font-family:Open Sans,sans-serif;font-size:16px;font-weight:600;color:#fff}.Chartcontainer button:focus{outline:0}.tick{font-weight:700}.tick line{opacity:.15}.Chartcontainer button:hover{background-color:#fff;color:#000}.legend{width:90%;margin-left:5%;display:inline-flex;justify-content:center;flex-wrap:wrap;float:left}.legend-btn{width:200px;border:2px solid #53565a!important;border-radius:2px}.label{font-size:12px;font-weight:700}.chart-lev{margin-top:50px;width:98%;box-shadow:2px 2px 4px rgba(0,0,0,.247059);margin-left:1%;display:inline-block}.desc{width:24%;float:left;margin-left:1%}.desc-text{height:320px;width:98%;margin-top:40px;padding:5px;font-size:14px;text-align:justify;overflow-y:auto}.desc-text ul{padding-left:10px}.rect{border:2px solid #53565a}.heading a,.heading a:focus{color:#00a3e0}.perc-check{height:50px;width:98%;margin-left:1%;display:block;position:relative;padding-left:5px;margin-top:12px;cursor:pointer;font-size:16px;color:#53565a;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.perc-check input{cursor:pointer}.perc-checkinput,.perc-check input{position:absolute;opacity:0}.perc-checkinput+label{position:relative;cursor:pointer;padding:0;width:20px;height:20px}.perc-checkinput+label:before{content:"";margin-right:10px;display:inline-block;vertical-align:text-top;width:20px;height:20px;background:#00a3e0;color:#86bc25;border:1px solid #fff;border-radius:2px}.perc-checkinput:hover+label:before{background:#00a3e0;color:#00a3e0}.perc-checkinput:checked+label:before{color:#00a3e0;background:#00a3e0;border:1px solid #fff;border-radius:2px}.perc-checkinput:disabled+label{color:#63666a;cursor:auto}.perc-checkinput:disabled+label:before{box-shadow:none;background:#00a3e0}.perc-checkinput:checked+label:after{content:"";position:absolute;left:4px;top:8px;background:#fff;width:3px;height:3px;box-shadow:2px 0 0 #fff,4px 0 0 #fff,4px -2px 0 #fff,4px -4px 0 #fff,4px -6px 0 #fff,4px -8px 0 #fff;transform:rotate(45deg)}',""])},function(e,r){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],r=0;r<this.length;r++){var o=this[r];o[2]?e.push("@media "+o[2]+"{"+o[1]+"}"):e.push(o[1])}return e.join("")},e.i=function(r,o){"string"==typeof r&&(r=[[null,r,""]]);for(var a={},p=0;p<this.length;p++){var t=this[p][0];"number"==typeof t&&(a[t]=!0)}for(p=0;p<r.length;p++){var u=r[p];"number"==typeof u[0]&&a[u[0]]||(o&&!u[2]?u[2]=o:o&&(u[2]="("+u[2]+") and ("+o+")"),e.push(u))}},e}},function(e,r,o){function a(e,r){for(var o=0;o<e.length;o++){var a=e[o],p=B[a.id];if(p){p.refs++;for(var t=0;t<p.parts.length;t++)p.parts[t](a.parts[t]);for(;t<a.parts.length;t++)p.parts.push(y(a.parts[t],r))}else{for(var u=[],t=0;t<a.parts.length;t++)u.push(y(a.parts[t],r));B[a.id]={id:a.id,refs:1,parts:u}}}}function p(e){for(var r=[],o={},a=0;a<e.length;a++){var p=e[a],t=p[0],u=p[1],d=p[2],i=p[3],y={css:u,media:d,sourceMap:i};o[t]?o[t].parts.push(y):r.push(o[t]={id:t,parts:[y]})}return r}function t(e,r){var o=h(),a=S[S.length-1];if("top"===e.insertAt)a?a.nextSibling?o.insertBefore(r,a.nextSibling):o.appendChild(r):o.insertBefore(r,o.firstChild),S.push(r);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(r)}}function u(e){e.parentNode.removeChild(e);var r=S.indexOf(e);r>=0&&S.splice(r,1)}function d(e){var r=document.createElement("style");return r.type="text/css",t(e,r),r}function i(e){var r=document.createElement("link");return r.rel="stylesheet",t(e,r),r}function y(e,r){var o,a,p;if(r.singleton){var t=T++;o=s||(s=d(r)),a=l.bind(null,o,t,!1),p=l.bind(null,o,t,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=i(r),a=m.bind(null,o),p=function(){u(o),o.href&&URL.revokeObjectURL(o.href)}):(o=d(r),a=g.bind(null,o),p=function(){u(o)});return a(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;a(e=r)}else p()}}function l(e,r,o,a){var p=o?"":a.css;if(e.styleSheet)e.styleSheet.cssText=N(r,p);else{var t=document.createTextNode(p),u=e.childNodes;u[r]&&e.removeChild(u[r]),u.length?e.insertBefore(t,u[r]):e.appendChild(t)}}function g(e,r){var o=r.css,a=r.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function m(e,r){var o=r.css,a=r.sourceMap;a&&(o+="\\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var p=new Blob([o],{type:"text/css"}),t=e.href;e.href=URL.createObjectURL(p),t&&URL.revokeObjectURL(t)}var B={},c=function(e){var r;return function(){return"undefined"==typeof r&&(r=e.apply(this,arguments)),r}},V=c(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),h=c(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,T=0,S=[];e.exports=function(e,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=V()),"undefined"==typeof r.insertAt&&(r.insertAt="bottom");var o=p(e);return a(o,r),function(e){for(var t=[],u=0;u<o.length;u++){var d=o[u],i=B[d.id];i.refs--,t.push(i)}if(e){var y=p(e);a(y,r)}for(var u=0;u<t.length;u++){var i=t[u];if(0===i.refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete B[i.id]}}}};var N=function(){var e=[];return function(r,o){return e[r]=o,e.filter(Boolean).join("\\n")}}()},function(e,r,o){var a=o(3);"string"==typeof a&&(a=[[e.id,a,""]]);o(5)(a,{});a.locals&&(e.exports=a.locals)}]);
